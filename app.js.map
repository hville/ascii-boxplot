{"version":3,"sources":["webpack:///webpack/bootstrap d6101c4809ae62adaccf","webpack:///./src/data.js","webpack:///./src/goog.js","webpack:///./src/app.js","webpack:///./src/usr.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;ACrDA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,6EAA6E,aAAa;AAC1F,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;;;;;AC7BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,oBAAoB;AAC/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX,EAAE;;AAEF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,oEAAoE,2BAA2B;AAC/F;AACA;AACA;AACA,GAAG;AACH,sBAAsB;AACtB;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,oBAAoB;;AAE7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,EAAE;;AAEF;AACA;AACA,oBAAoB;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;;;;;;;ACxFA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf,eAAe;AACf;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,0BAA0B,gBAAgB;AAC1C;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,WAAW,2BAA2B;AACtC;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d6101c4809ae62adaccf","var user = require('./usr'),\r\n\t\tStore = require('./mini-store')\r\n\r\nmodule.exports = UserStore\r\n\r\nfunction weightSorter(a, b) {\r\n\treturn Math.abs(user.types[b]) - Math.abs(user.types[a])\r\n}\r\n\r\nfunction typesMapper(name) {\r\n\treturn { name: name, weight: user.types[name] }\r\n}\r\n\r\nfunction UserStore(cb) {\r\n\tfor (var key in user) {\r\n\t\tif (localStorage[key]) user[key] = JSON.parse(localStorage[key])\r\n\t\telse localStorage[key] = JSON.stringify(user[key])\r\n\t}\r\n\r\n\tuser.meta = ''\r\n\tuser.list = Object.keys(user.types).sort(weightSorter).map(typesMapper) //[{name, weight}]\r\n\tuser.hmap = [] //{id, loc, typ, wgt}\r\n\r\n\treturn Store(user, function(n,p,o) {\r\n\t\tfor (var k in n) {\r\n\t\t\tif (n[k] !== o[k]) localStorage[k] = JSON.stringify(n[k])\r\n\t\t}\r\n\t\tcb(n,p,o)\r\n\t})\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/data.js\n// module id = 0\n// module chunks = 0","/* global google */\r\n\r\nvar goo = null,\r\n\t\t//pok = null,\r\n\t\tmap = null,\r\n\t\t//srv = null,\r\n\t\t//typ = [],\r\n\t\tsrc,\r\n\t\t//lst = [],\r\n\t\tcity\r\n\r\nmodule.exports = function init(store, callback) {\r\n\tif (typeof google === 'undefined') return window.onload = init.bind(null, store, callback)\r\n\tgoo = google.maps\r\n\t//pok = goo.places.PlacesServiceStatus.OK\r\n\r\n\tmap = createMapCo('map', store)\r\n\tsrc = store\r\n\tcity = createCityCo('city')\r\n\t//srv = goo.places.PlacesService(map.el)\r\n\tcallback({map: map, city:city})\r\n}\r\n\r\nfunction createMapCo(id, store) {\r\n\tvar el = document.getElementById(id),\r\n\t\t\thot = new google.maps.visualization.HeatmapLayer()\r\n\r\n\tvar gm = new google.maps.Map(el, {\r\n\t\tzoom: 8,\r\n\t\tcenter: {lat: -34.397, lng: 150.644}\r\n\t})\r\n\r\n\tgm.addListener('zoom_changed', function() {\r\n\t\tstore([['r', ['mapOptions', 'zoom'], gm.getZoom()]])\r\n\t})\r\n\tgm.addListener('center_changed', function() {\r\n\t\tstore([['r', ['mapOptions', 'center'], gm.getCenter()]])\r\n\t})\r\n\treturn {\r\n\t\tel: el,\r\n\t\tview: function(n, p, o) {\r\n\t\t\t//if (n.mapOptions.center !== o.mapOptions.center) gm.setCenter({lat: -34.397, lng: 150.644})\r\n\t\t\tif (n.mapOptions.zoom !== o.mapOptions.zoom) gm.setZoom(n.mapOptions.zoom)\r\n\t\t\tif (n.heatMap !== o.heatMap) hot.setOptions(n.heatMap)\r\n\t\t\tif (!hot.getMap()) hot.setMap(gm)\r\n\t\t},\r\n\t\tstore: function() {},\r\n\t\ton: {}\r\n\t}\r\n}\r\n\r\nfunction createCityCo(id) {\r\n\tvar el = document.getElementById(id),\r\n\t\t\tac = new goo.places.Autocomplete(el, {types: ['(cities)']})\r\n\r\n\tac.addListener('place_changed', function() {\r\n\t\tvar place = ac.getPlace()\r\n\t\tconsole.log('place_changed', place, place.address_components)\r\n\t\tsrc([\r\n\t\t\t['r',\t['city'], {\r\n\t\t\t\tid: place.place_id,\r\n\t\t\t\taddress: place.address_components[1],\r\n\t\t\t\tname: place.name,\r\n\t\t\t\tlocation: place.geometry.location\r\n\t\t\t}],\r\n\t\t\t['a', ['log', '-'], 'AutoComplete getPlace(): '+place.toString()]\r\n\t\t])\r\n\t})\r\n\r\n\treturn {\r\n\t\tel: el,\r\n\t\tview: function() { console.log('ac view')}\r\n\t}\r\n}\r\n\r\n/*function getTyp(ctr, key, rad) {\r\n\tctx.typ.push(key)\r\n\t//console.log('SEARCHING type '+key+' in '+ctr.toString(), 'meta')\r\n\tctx.srv.radarSearch({\r\n\t\tlocation: ctr, //OR bounds: map.getBounds()\r\n\t\tradius: rad,\r\n\t\ttype: key\r\n\t}, function(res, status) {\r\n\t\tif (status !== ctx.pok) return callback('err', 'radarSearch error')\r\n\t\tctx.lst.push(res)\r\n\t\tcallback('typ', ctx)\r\n\t})\r\n}\r\n*/\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/goog.js\n// module id = 1\n// module chunks = 0","'use-strict'\r\n/* eslint no-console:0 */\r\n\r\nvar Data = require('./data'),\r\n\t\tgoog = require('./goog'),\r\n\t\tCo = require('./co'),\r\n\t\tviewstore = require('@private/mini-view-store')\r\n\r\nvar co = new Co(),\r\n\t\tdata = Data(scheduleRender),\r\n\t\t//typeIn = document.getElementById('type'),\r\n\t\t//optsIn = document.getElementById('options'),\r\n\t\toldState = {},\r\n\t\tnewState = {},\r\n\t\tfullPatch = [],\r\n\t\trafId = NaN\r\n\r\ngoog(data, function(res) {\r\n\tco.register(res.map)\r\n\tco.register(res.city)\r\n})\r\n\r\nco.register({\r\n\tel: document.getElementById('footer'),\r\n\tview: function(n, p, o) {\r\n\t\tfor (var i=o.log.length; i<n.log.length; ++i) this.el.appendChild(document.createTextNode(n.log[i]))\r\n\t}\r\n})\r\n\r\n/*function typMapper(ctx) {\r\n\tvar typ = this.typ\r\n\tvar types = data.get('types')\r\n\treturn {\r\n\t\tid: itm.place_id,\r\n\t\tlocation: itm.geometry.location,\r\n\t\ttype: typ,\r\n\t\tweight: types[typ]\r\n\t}\r\n}\r\n*/\r\n\r\nfunction scheduleRender(n, p) {\r\n\tnewState = n\r\n\tArray.prototype.push.apply(fullPatch, p)\r\n\tif (rafId === null) rafId = window.requestAnimationFrame(render)\r\n}\r\n\r\nfunction render() {\r\n\tco.view(newState, fullPatch, oldState)\r\n\toldState = newState\r\n\tfullPatch = []\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.js\n// module id = 2\n// module chunks = 0","module.exports = {\r\n\tcity: {\r\n\t\tid: null,\r\n\t\taddress: 'ho chi minh, district 2',\r\n\t\tname: 'ho chi minh, district 2',\r\n\t\tlocation: null\r\n\t},\r\n\tradius: 10000,\r\n\tlog: [],\r\n\tmapOptions: {\r\n\t\tcenter: {lat: -34.397, lng: 150.644},\r\n\t\tzoom: 12\r\n\t},\r\n\theatMap: {\r\n\t\tdata: [],\r\n\t\topacity: 0.5, //default 0.6\r\n\t\tdissipating: true, //default true(shape independent of zoom) false(shape grows on zoom)\r\n\t\tradius: 20 //datapoint in pixels\r\n\t},\r\n\tlist: [], //{ name: name, weight: user.types[name] }\r\n\ttypes: {\r\n\t\tairport: -3,\r\n\t\tart_gallery: 4,\r\n\t\tatm: 1,\r\n\t\tbakery: 3,\r\n\t\tbank: 1,\r\n\t\tbar: 2,\r\n\t\tbicycle_store: 2,\r\n\t\tbook_store: 3,\r\n\t\tbus_station: 1,\r\n\t\tcafe: 9,\r\n\t\tcampground: -1,\r\n\t\tcar_dealer: -1,\r\n\t\tcar_rental: -1,\r\n\t\tcar_repair: -2,\r\n\t\tcar_wash: -2,\r\n\t\tcemetery: 2,\r\n\t\tchurch: 1,\r\n\t\tembassy: 2,\r\n\t\tfurniture_store: -1,\r\n\t\tgas_station: -3,\r\n\t\tgym: 1,\r\n\t\tlaundry: 1,\r\n\t\tlibrary: 2,\r\n\t\tliquor_store: 1,\r\n\t\tlodging: 2,\r\n\t\tmuseum: 4,\r\n\t\tnight_club: 2,\r\n\t\tpark: 4,\r\n\t\tparking: 1,\r\n\t\tpharmacy: 1,\r\n\t\trestaurant: 5,\r\n\t\trv_park: -1,\r\n\t\tschool: 1,\r\n\t\tstadium: -1,\r\n\t\tstorage: -1,\r\n\t\tstore: 2,\r\n\t\tsubway_station: 5,\r\n\t\ttaxi_stand: 2,\r\n\t\ttrain_station: 6,\r\n\t\ttransit_station: 7,\r\n\t\tuniversity: 8\r\n\t}\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/usr.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}